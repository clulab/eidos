# This file is for the looping/streaming version of the wmexchanger subproject.
# docker build -f ./Docker/DockerfileLoopDist -t clulab/eidos-loop .
# docker run --env eidos_threads=6 --env eidos_memory=-Xmx24g eidos-loop

FROM openjdk:8

RUN apt-get update
RUN apt-get install -y unzip

RUN mkdir /eidos
WORKDIR /eidos

COPY ./wmexchanger/target/universal/wmexchanger*.zip .
RUN export ZIPFILE=`ls *.zip`
RUN unzip ${ZIPFILE}
RUN mv ${ZIPFILE}/bin .
RUN mv ${ZIPFILE}/lib .
RUN rm ${ZIPFILE}

COPY ./wmexchanger/bin/start-loop-all.sh .
RUN chmod +x *.sh

ENTRYPOINT ["/bin/bash"]
#ENTRYPOINT ["./loop_sbt_loop_all.sh"]
